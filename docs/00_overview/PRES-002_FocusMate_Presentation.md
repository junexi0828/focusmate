# Focus Mate ì‹œìŠ¤í…œ ì¢…í•© ë°œí‘œ ìë£Œ

**ì‘ì„±ì¼**: 2025-12-19
**ë²„ì „**: 1.0
**ë¬¸ì„œ ìœ í˜•**: ê¸°ìˆ  ë°œí‘œ ìë£Œ

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#2-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ê¸°ìˆ  ìŠ¤íƒ](#3-ê¸°ìˆ -ìŠ¤íƒ)
4. [í•µì‹¬ ê¸°ëŠ¥ ë° ì‚¬ìš©ì íë¦„](#4-í•µì‹¬-ê¸°ëŠ¥-ë°-ì‚¬ìš©ì-íë¦„)
5. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#5-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
6. [ì‹¤ì‹œê°„ í†µì‹  WebSocket](#6-ì‹¤ì‹œê°„-í†µì‹ -websocket)
7. [ë§¤ì¹­ ì‹œìŠ¤í…œ](#7-ë§¤ì¹­-ì‹œìŠ¤í…œ)
8. [ë­í‚¹ ì‹œìŠ¤í…œ](#8-ë­í‚¹-ì‹œìŠ¤í…œ)
9. [ë¬¸ì œ í•´ê²° ë°©ì‹ ë° ì•Œê³ ë¦¬ì¦˜](#9-ë¬¸ì œ-í•´ê²°-ë°©ì‹-ë°-ì•Œê³ ë¦¬ì¦˜)
10. [ë³´ì•ˆ ë° ì„±ëŠ¥ ìµœì í™”](#10-ë³´ì•ˆ-ë°-ì„±ëŠ¥-ìµœì í™”)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ì •ì²´ì„±

**Focus Mate**ëŠ” ë‹¨ìˆœí•œ ì›¹ì‚¬ì´íŠ¸ê°€ ì•„ë‹Œ **ê³ í’ˆì§ˆ ìƒì‚°ì„± ì• í”Œë¦¬ì¼€ì´ì…˜(High-Fidelity Productivity Application)**ì…ë‹ˆë‹¤.

#### í•µì‹¬ ê°€ì¹˜
- **ëª°ì…ê°**: í˜ì´ì§€ ë¡œë”© ì—†ì´ ì‘ì—…ì— ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½
- **ì¦‰ê°ì ì¸ ë°˜ì‘**: ëª¨ë“  ì•¡ì…˜ì´ 0.1ì´ˆ ì´ë‚´ ë°˜ì‘
- **ì‹ ë¢°ì„±**: ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œì—ë„ í•µì‹¬ ê¸°ëŠ¥ ìœ ì§€

### 1.2 ì‹œìŠ¤í…œ ëª©ì 

ì›ê²© ê·¼ë¬´ í™˜ê²½ì—ì„œ íŒ€ì›ë“¤ì˜ ì§‘ì¤‘ë ¥ê³¼ ìƒì‚°ì„±ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ **íŒ€ ê¸°ë°˜ í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸ í˜‘ì—… ë„êµ¬**

#### ì£¼ìš” ê¸°ëŠ¥
- ğŸ  **ë°© ìƒì„± ë° ê´€ë¦¬**: íŒ€ ë‹¨ìœ„ í¬ëª¨ë„ë¡œ ì„¸ì…˜ ê³µê°„
- â±ï¸ **ì‹¤ì‹œê°„ íƒ€ì´ë¨¸ ë™ê¸°í™”**: ì„œë²„ ê¸°ë°˜ SSOT
- ğŸ“Š **í†µê³„ ë° ë¶„ì„**: ê°œì¸/íŒ€ ì§‘ì¤‘ ì‹œê°„ ì¶”ì 
- ğŸ† **ë­í‚¹ ì‹œìŠ¤í…œ**: íŒ€ ë‹¨ìœ„ ê²½ìŸ ë° ë™ê¸°ë¶€ì—¬
- ğŸ’¬ **ë§¤ì¹­ ì‹œìŠ¤í…œ**: ê³¼íŒ… ìŠ¤íƒ€ì¼ ê·¸ë£¹ ë§¤ì¹­
- ğŸ’¬ **í†µí•© ë©”ì‹œì§•**: Direct, Team, Matching ì±„íŒ…

### 1.3 í†µê³„

| í•­ëª© | ìˆ˜ëŸ‰ |
|------|------|
| **ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”** | 38ê°œ |
| **API ì—”ë“œí¬ì¸íŠ¸** | 100+ |
| **í”„ë¡ íŠ¸ì—”ë“œ ë¼ìš°íŠ¸** | 20+ |
| **WebSocket ì±„ë„** | 3ì¢…ë¥˜ |
| **ì´ ì½”ë“œ ë¼ì¸** | 10,000+ |

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì„¤ê³„ ì² í•™

Focus Mateì˜ ì•„í‚¤í…ì²˜ëŠ” 3ê°€ì§€ í•µì‹¬ ì² í•™ì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

#### 1. Zero-Latency Interaction
- **ì „ëµ**: ìˆœìˆ˜ SPA ì•„í‚¤í…ì²˜ ì±„íƒ, SSR ë°°ì œ
- **êµ¬í˜„**: TanStack Routerì˜ Preload ê¸°ëŠ¥
- **ëª©í‘œ**: ëª¨ë“  UI ìƒí˜¸ì‘ìš© 100ms ì´ë‚´ ë°˜ì‘

#### 2. Client-First State
- **ì „ëµ**: ë°±ì—”ë“œëŠ” ìˆœìˆ˜ ë°ì´í„° API
- **êµ¬í˜„**: TanStack Queryë¡œ ì„œë²„ ë°ì´í„° ë™ê¸°í™”
- **ëª©í‘œ**: ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œë„ ì•± ë™ì‘

#### 3. Type-Safety Across Boundaries
- **ì „ëµ**: ì½”ë“œë¡œ ê³„ì•½ ë§ºê¸°
- **êµ¬í˜„**: FastAPI OpenAPI â†’ TypeScript íƒ€ì… ìë™ ìƒì„±
- **ëª©í‘œ**: ë°±ì—”ë“œ ë³€ê²½ì´ ì»´íŒŒì¼ ì—ëŸ¬ë¡œ ì¦‰ì‹œ ê°ì§€

### 2.2 ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```mermaid
graph TB
    subgraph "í´ë¼ì´ì–¸íŠ¸ ê³„ì¸µ"
        A[React 18.3.1 SPA]
        A1[TanStack Router]
        A2[TanStack Query]
    end

    subgraph "ë°±ì—”ë“œ ê³„ì¸µ"
        B[FastAPI 0.115.6]
        B2[SQLAlchemy 2.0.35+]
    end

    subgraph "ë°ì´í„° ê³„ì¸µ"
        C[(PostgreSQL)]
        D[(Redis)]
    end

    A -->|REST API| B
    A -.->|WebSocket| B
    B -->|asyncpg| C
    B -->|Pub/Sub| D
```

### 2.3 ê³„ì¸µë³„ ì•„í‚¤í…ì²˜

#### í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°
```
src/
â”œâ”€â”€ routes/              # íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…
â”‚   â”œâ”€â”€ __root.tsx      # ìµœìƒìœ„ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ index.tsx       # ë©”ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ rooms/
â”‚   â”‚   â”œâ”€â”€ $roomId.tsx # ë™ì  ë¼ìš°íŒ…
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â””â”€â”€ _auth.tsx       # ì¸ì¦ í•„ìš” ë¼ìš°íŠ¸
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/             # Radix UI ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ features/       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ queries/        # TanStack Query í›…
â””â”€â”€ api/
    â””â”€â”€ generated/      # OpenAPI Codegen
```

#### ë°±ì—”ë“œ êµ¬ì¡°
```
app/
â”œâ”€â”€ api/v1/endpoints/   # Router Layer
â”œâ”€â”€ services/           # Service Layer
â”œâ”€â”€ repositories/       # Repository Layer
â”œâ”€â”€ models/             # SQLAlchemy Models
â””â”€â”€ schemas/            # Pydantic Schemas
```

---

## 3. ê¸°ìˆ  ìŠ¤íƒ

### 3.1 í”„ë¡ íŠ¸ì—”ë“œ

#### í•µì‹¬ í”„ë ˆì„ì›Œí¬
- **React 18.3.1**: Concurrent, Suspense
- **TypeScript 5.9.3**: Strict ëª¨ë“œ
- **Vite 6.4.1**: ë¹ ë¥¸ HMR

#### ë¼ìš°íŒ… ë° ìƒíƒœ ê´€ë¦¬
- **TanStack Router 1.141.0**: íƒ€ì… ì•ˆì „ ë¼ìš°íŒ…
- **TanStack Query 5.90.12**: ì„œë²„ ìƒíƒœ ê´€ë¦¬

#### UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Radix UI**: ì ‘ê·¼ì„± ìš°ì„ 
- **Tailwind CSS 4.1.18**: ìœ í‹¸ë¦¬í‹° CSS
- **Framer Motion 12.23.26**: ì• ë‹ˆë©”ì´ì…˜
- **Recharts 2.15.4**: ì°¨íŠ¸

### 3.2 ë°±ì—”ë“œ

#### ì›¹ í”„ë ˆì„ì›Œí¬
- **FastAPI 0.115.6**: ë¹„ë™ê¸° I/O
- **Uvicorn 0.34.0**: ASGI ì„œë²„
- **Python 3.13**: ìµœì‹  íƒ€ì… íŒíŠ¸

#### ë°ì´í„°ë² ì´ìŠ¤
- **SQLAlchemy 2.0.35+**: ë¹„ë™ê¸° ORM
- **asyncpg 0.30.0**: PostgreSQL ë“œë¼ì´ë²„
- **Alembic 1.14.0**: ë§ˆì´ê·¸ë ˆì´ì…˜

#### ì¸ì¦ ë° ë³´ì•ˆ
- **PyJWT 2.10.1**: JWT í† í°
- **bcrypt 4.2.1**: ë¹„ë°€ë²ˆí˜¸ í•´ì‹±

### 3.3 ì¸í”„ë¼

- **PostgreSQL**: 38ê°œ í…Œì´ë¸”
- **Redis**: Pub/Sub, ìºì‹±
- **AWS S3**: íŒŒì¼ ìŠ¤í† ë¦¬ì§€
- **SMTP**: ì´ë©”ì¼ ì•Œë¦¼

---

## 4. í•µì‹¬ ê¸°ëŠ¥ ë° ì‚¬ìš©ì íë¦„

### 4.1 í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸ ì‹œìŠ¤í…œ

#### íƒ€ì´ë¨¸ ë™ê¸°í™” ì•„í‚¤í…ì²˜

**í•µì‹¬ ì›ì¹™**: ì„œë²„ê°€ ì§„ì‹¤ì˜ ì›ì²œ (SSOT)

```mermaid
sequenceDiagram
    participant H as Host
    participant S as Server
    participant C as Client

    H->>S: POST /timer/start
    S->>S: target_timestamp ê³„ì‚°
    S->>C: WebSocket: timer_update
    C->>C: remaining = target - now
```

#### íƒ€ì´ë¨¸ ìƒíƒœ ê³„ì‚°

**ì„œë²„ ì¸¡**:
```python
def start_timer(duration_seconds: int):
    now = datetime.now(UTC)
    target = now + timedelta(seconds=duration_seconds)

    timer_state = {
        "status": "running",
        "target_timestamp": target.isoformat()
    }

    await broadcast_to_room(room_id, timer_state)
```

**í´ë¼ì´ì–¸íŠ¸ ì¸¡**:
```typescript
function calculateRemaining(target: string): number {
    const targetTime = new Date(target).getTime();
    const now = Date.now();
    return Math.max(0, Math.floor((targetTime - now) / 1000));
}
```

### 4.2 ë°© ìƒì„± ë° ì°¸ì—¬ íë¦„

```mermaid
graph TD
    A[ì‚¬ìš©ì] -->|ë°© ìƒì„±| B[POST /api/v1/rooms]
    B --> C{ì…ë ¥ ê²€ì¦}
    C -->|ì„±ê³µ| D[UUID ìƒì„±]
    C -->|ì‹¤íŒ¨| E[400 Error]
    D --> F[DB ì €ì¥]
    F --> G[ê³µìœ  URL ìƒì„±]
    G --> H[ë°© ì •ë³´ ë°˜í™˜]
```

### 4.3 í†µí•© ë©”ì‹œì§• ì‹œìŠ¤í…œ

#### 3ê°€ì§€ ì±„íŒ… íƒ€ì…

| íƒ€ì… | ì„¤ëª… | ì‚¬ìš© ì‚¬ë¡€ |
|------|------|-----------|
| **Direct** | 1:1 ì±„íŒ… | ì¹œêµ¬ ê°„ ëŒ€í™” |
| **Team** | íŒ€ ì±„ë„ | í”„ë¡œì íŠ¸ í˜‘ì—… |
| **Matching** | ë§¤ì¹­ ê·¸ë£¹ | ê³¼íŒ… ë‹¨ì²´ ì±„íŒ… |

#### ë©”ì‹œì§• íŒŒì´í”„ë¼ì¸

```mermaid
sequenceDiagram
    participant U1 as User 1
    participant API as FastAPI
    participant Redis as Redis
    participant U2 as User 2

    U1->>API: POST /messages
    API->>API: DB ì €ì¥
    API->>Redis: Publish
    Redis->>U1: Broadcast
    Redis->>U2: Broadcast
```

---

## 5. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 5.1 ê°œìš”

- **DBMS**: PostgreSQL
- **ì´ í…Œì´ë¸”**: 38ê°œ
- **ë§ˆì´ê·¸ë ˆì´ì…˜**: Alembic
- **ì—°ê²° í’€**: 20 + 10 ì˜¤ë²„í”Œë¡œìš°

### 5.2 ë„ë©”ì¸ë³„ ë¶„ë¥˜

- **í•µì‹¬ ë„ë©”ì¸ (5)**: User, Room, Participant, Timer, Session
- **ì‚¬ìš©ì ê´€ë¦¬ (5)**: Settings, Goals, Achievement, Verification
- **ì»¤ë®¤ë‹ˆí‹° (5)**: Post, Comment, Like, Read
- **ë­í‚¹ ì‹œìŠ¤í…œ (7)**: Teams, Leaderboard, Sessions
- **ë§¤ì¹­ ì‹œìŠ¤í…œ (5)**: Pools, Proposals, Chat
- **ë©”ì‹œì§• (5)**: Chat Rooms, Messages
- **ê¸°íƒ€ (6)**: Friend, Notifications

### 5.3 í•µì‹¬ í…Œì´ë¸”

#### user
```sql
CREATE TABLE "user" (
    id VARCHAR(36) PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    username VARCHAR(50) UNIQUE NOT NULL,
    hashed_password VARCHAR(255) NOT NULL,
    total_focus_time INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT NOW()
);
```

#### room
```sql
CREATE TABLE room (
    id VARCHAR(36) PRIMARY KEY,
    room_name VARCHAR(100) NOT NULL,
    host_id VARCHAR(36) REFERENCES "user"(id),
    work_duration_minutes INTEGER DEFAULT 25,
    break_duration_minutes INTEGER DEFAULT 5,
    created_at TIMESTAMP DEFAULT NOW()
);
```

### 5.4 ì¸ë±ì‹± ì „ëµ

**ë³µí•© ì¸ë±ìŠ¤**:
```sql
CREATE INDEX ix_session_user_date
ON session_history(user_id, completed_at DESC);
```

**ë¶€ë¶„ ì¸ë±ìŠ¤**:
```sql
CREATE INDEX ix_room_active
ON room(is_active)
WHERE is_active = TRUE;
```

---

## 6. ì‹¤ì‹œê°„ í†µì‹  WebSocket

### 6.1 ì•„í‚¤í…ì²˜

#### 3ê°€ì§€ ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ìš©ë„ |
|------------|------|
| `/api/v1/notifications/ws` | ì‹¤ì‹œê°„ ì•Œë¦¼ |
| `/ws/room/{room_id}` | íƒ€ì´ë¨¸ ë™ê¸°í™” |
| `/api/v1/chats/ws` | ì±„íŒ… ë©”ì‹œì§€ |

### 6.2 Redis Pub/Sub

```mermaid
graph LR
    A[Client 1] -->|WSS| B[Backend 1]
    C[Client 2] -->|WSS| D[Backend 2]

    B <-->|Pub/Sub| E[Redis]
    D <-->|Pub/Sub| E
```

#### ì±„ë„ êµ¬ì¡°
```python
# ì‚¬ìš©ìë³„ ì•Œë¦¼
CHANNEL_USER = "notifications:user:{user_id}"

# ë°©ë³„ ì—…ë°ì´íŠ¸
CHANNEL_ROOM = "room:{room_id}:updates"

# ë§¤ì¹­ ì±„íŒ…
CHANNEL_CHAT = "matching:chat:{room_id}"
```

### 6.3 ë©”ì‹œì§€ í”„ë¡œí† ì½œ

#### ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸
```json
{
  "type": "notification",
  "data": {
    "title": "ìƒˆ ì¹œêµ¬ ìš”ì²­",
    "message": "Aliceë‹˜ì´ ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤"
  }
}
```

### 6.4 ì—°ê²° ê´€ë¦¬

#### ì¬ì—°ê²° ì „ëµ
```typescript
const reconnect = () => {
    reconnectAttempts++;
    const delay = Math.min(1000 * 2 ** reconnectAttempts, 30000);
    setTimeout(() => connect(), delay);
};
```

**ì¬ì—°ê²° ì‹œë„**: 2ì´ˆ â†’ 4ì´ˆ â†’ 8ì´ˆ â†’ 16ì´ˆ â†’ 30ì´ˆ

---

## 7. ë§¤ì¹­ ì‹œìŠ¤í…œ

### 7.1 ê°œìš”

**ê³¼íŒ… ìŠ¤íƒ€ì¼ ê·¸ë£¹ ë§¤ì¹­**: í•™ìƒ ì¸ì¦ ê¸°ë°˜

#### í•µì‹¬ ê¸°ëŠ¥
- ğŸ“ í•™ìƒ ì¸ì¦
- ğŸ‘¥ ê·¸ë£¹ ìƒì„± (2-8ëª…)
- ğŸ” ìë™ ë§¤ì¹­
- ğŸ’¬ ë¸”ë¼ì¸ë“œ ì±„íŒ…

### 7.2 ë§¤ì¹­ í”„ë¡œì„¸ìŠ¤

```mermaid
sequenceDiagram
    participant U as User
    participant S as Service

    U->>S: í•™ìƒ ì¸ì¦ ì œì¶œ
    Note over S: ê´€ë¦¬ì ìŠ¹ì¸
    U->>S: ë§¤ì¹­ í’€ ìƒì„±
    Note over S: ìë™ ë§¤ì¹­
    S->>U: ë§¤ì¹­ ì œì•ˆ
    U->>S: ì œì•ˆ ìˆ˜ë½
    S->>U: ì±„íŒ…ë°© ìƒì„±
```

### 7.3 ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜

```python
def calculate_match_score(pool_a, pool_b) -> int:
    score = 0

    # í•™ê³¼ ë§¤ì¹­
    if pool_a.preferred == 'same_department':
        if pool_a.department == pool_b.department:
            score += 100
        elif check_major_category(pool_a, pool_b):
            score += 50

    # ì–‘ë°©í–¥ ì ìˆ˜
    if pool_b.preferred == 'same_department':
        if pool_a.department == pool_b.department:
            score += 100

    return score
```

### 7.4 ë¸”ë¼ì¸ë“œ ì±„íŒ…

```python
def assign_anonymous_names(group_a, group_b):
    members = []

    for idx, user_id in enumerate(group_a, 1):
        members.append({
            "user_id": user_id,
            "group_label": "A",
            "anonymous_name": f"A{idx}"
        })

    for idx, user_id in enumerate(group_b, 1):
        members.append({
            "user_id": user_id,
            "group_label": "B",
            "anonymous_name": f"B{idx}"
        })

    return members
```

---

## 8. ë­í‚¹ ì‹œìŠ¤í…œ

### 8.1 ê°œìš”

**íŒ€ ê¸°ë°˜ ê²½ìŸ**: ê²Œì„í™”ë¥¼ í†µí•œ ë™ê¸°ë¶€ì—¬

#### í•µì‹¬ íŠ¹ì§•
- ğŸ† íŒ€ ê¸°ë°˜ (4ì¸ ì´ìƒ)
- ğŸ“ í•™êµ ì¸ì¦
- ğŸ® ë¯¸ë‹ˆê²Œì„
- ğŸ… 3ê°€ì§€ ë¦¬ë”ë³´ë“œ

### 8.2 íŒ€ ì‹œìŠ¤í…œ

#### 4ê°€ì§€ ì†Œì†
1. **ì¼ë°˜**: ì œí•œ ì—†ìŒ
2. **í•™ê³¼**: ë™ì¼ í•™ê³¼
3. **ì—°êµ¬ì‹¤**: ë™ì¼ ì—°êµ¬ì‹¤
4. **ë™ì•„ë¦¬**: ë™ì¼ ë™ì•„ë¦¬

### 8.3 ëª…ì˜ˆì˜ ì „ë‹¹

#### 1. ìˆœê³µë¶€ì‹œê°„ ë­í‚¹
```
íŒ€ ìˆœê³µë¶€ì‹œê°„ = Î£(íŒ€ì›ë³„ ì§‘ì¤‘ ì‹œê°„)
```

#### 2. ì—°ì† ì„±ê³µ ë­í‚¹
```
ì—°ì† ì„±ê³µì¼ = ì—°ì† ëª©í‘œ ë‹¬ì„± ë‚ ì§œ ìˆ˜
```

#### 3. ë¯¸ë‹ˆê²Œì„ ë­í‚¹
```
íŒ€ ì ìˆ˜ = Î£(íŒ€ì›ë³„ ê²Œì„ ì ìˆ˜)
```

### 8.4 ë¯¸ë‹ˆê²Œì„

#### 3ê°€ì§€ ê²Œì„
- **í€´ì¦ˆ**: ì§‘ì¤‘ë ¥ ê´€ë ¨ (30ì´ˆ, +10ì )
- **ë°˜ì‘ ì†ë„**: ì•„ì´ì½˜ í´ë¦­
- **ê¸°ì–µë ¥**: ì¹´ë“œ ì§ ë§ì¶”ê¸°

---

## 9. ë¬¸ì œ í•´ê²° ë°©ì‹ ë° ì•Œê³ ë¦¬ì¦˜

### 9.1 íƒ€ì´ë¨¸ ë™ê¸°í™”

#### ë¬¸ì œ
- ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ ê°„ ë™ê¸°í™”
- ë„¤íŠ¸ì›Œí¬ ì§€ì—° í™˜ê²½
- íƒ­ ë¹„í™œì„±í™” ì‹œ ì •í™•ì„±

#### í•´ê²°: SSOT

```python
# ì„œë²„: target_timestamp
target = now + timedelta(seconds=duration)

# í´ë¼ì´ì–¸íŠ¸: ë‚¨ì€ ì‹œê°„ ê³„ì‚°
remaining = (target - now).total_seconds()
```

**ì¥ì **: ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë¬´ê´€, ì¦‰ì‹œ ë™ê¸°í™”

### 9.2 WebSocket ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤

#### ë¬¸ì œ
- ì—¬ëŸ¬ ë°±ì—”ë“œ ì¸ìŠ¤í„´ìŠ¤
- ë©”ì‹œì§€ ë¸Œë¡œë“œìºìŠ¤íŒ…

#### í•´ê²°: Redis Pub/Sub

```python
# ë°œí–‰
await redis.publish(channel, message)

# êµ¬ë…
async for msg in redis.subscribe(channel):
    await broadcast_to_clients(msg)
```

### 9.3 N+1 ì¿¼ë¦¬

#### ë¬¸ì œ
```python
# ë‚˜ìœ ì˜ˆ
for user in users:
    sessions = await get_sessions(user.id)
```

#### í•´ê²°: JOIN
```python
# ì¢‹ì€ ì˜ˆ
users = await session.execute(
    select(User).options(selectinload(User.sessions))
)
```

**ì„±ëŠ¥**: 101ê°œ ì¿¼ë¦¬ â†’ 1ê°œ ì¿¼ë¦¬

### 9.4 ìºì‹± ì „ëµ

**í´ë¼ì´ì–¸íŠ¸**:
```typescript
useQuery({
    queryKey: ['leaderboard'],
    staleTime: 5 * 60 * 1000  // 5ë¶„
});
```

**ì„œë²„**:
```python
@cache(ttl=300)  # 5ë¶„
async def get_leaderboard():
    return await db.query(Leaderboard).all()
```

---

## 10. ë³´ì•ˆ ë° ì„±ëŠ¥ ìµœì í™”

### 10.1 ë³´ì•ˆ

#### JWT ì¸ì¦
```python
def create_token(user_id: str) -> str:
    payload = {
        "sub": user_id,
        "exp": datetime.now() + timedelta(hours=24)
    }
    return jwt.encode(payload, SECRET_KEY)
```

#### ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
```python
def hash_password(password: str) -> str:
    return pwd_context.hash(password)
```

#### RBAC
- **USER**: ì¼ë°˜ ì‚¬ìš©ì
- **ADMIN**: ê´€ë¦¬ì
- **SUPER_ADMIN**: ìµœê³  ê´€ë¦¬ì

### 10.2 ì„±ëŠ¥ ìµœì í™”

#### API ì‘ë‹µ ì‹œê°„
**ëª©í‘œ**: p95 < 200ms

**ìµœì í™”**:
- ë¹„ë™ê¸° I/O
- ì—°ê²° í’€ë§
- ì¸ë±ì‹±
- Redis ìºì‹±

**ê²°ê³¼**: 450ms â†’ 120ms (73% ê°œì„ )

#### í”„ë¡ íŠ¸ì—”ë“œ
- Code Splitting
- ì´ë¯¸ì§€ ìµœì í™” (WebP)
- ë²ˆë“¤ í¬ê¸°: 1.2MB â†’ 450KB (62% ê°ì†Œ)

#### ë°ì´í„°ë² ì´ìŠ¤
- ë³µí•© ì¸ë±ìŠ¤
- ë¶€ë¶„ ì¸ë±ìŠ¤
- ì—°ê²° í’€ ìµœì í™”

### 10.3 ëª¨ë‹ˆí„°ë§

| ì§€í‘œ | ëª©í‘œ | í˜„ì¬ |
|------|------|------|
| API p95 | < 200ms | 120ms |
| WebSocket | < 100ms | 50ms |
| DB ì¿¼ë¦¬ | < 100ms | 45ms |

---

## ğŸ“Š ê²°ë¡ 

### ì£¼ìš” ì„±ê³¼

1. **ê³ í’ˆì§ˆ ì•„í‚¤í…ì²˜**: ISO/IEC 25010 ì¤€ìˆ˜
2. **íƒ€ì… ì•ˆì „ì„±**: 100% ì»¤ë²„ë¦¬ì§€
3. **ì‹¤ì‹œê°„ ë™ê¸°í™”**: < 100ms ì§€ì—°
4. **í™•ì¥ ê°€ëŠ¥ì„±**: ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥
5. **ë³´ì•ˆ**: ë‹¤ì¸µ ë³´ì•ˆ ì²´ê³„

### ê¸°ìˆ ì  ì°¨ë³„ì 

- **Zero-Latency**: SPA ì•„í‚¤í…ì²˜
- **SSOT íƒ€ì´ë¨¸**: ì„œë²„ ê¸°ë°˜ ì ˆëŒ€ ì‹œê°„
- **Type-Safety**: OpenAPI Codegen
- **Redis Pub/Sub**: ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ì§€ì›
- **ë³µí•© ì¸ë±ì‹±**: 73% ì„±ëŠ¥ ê°œì„ 

### í–¥í›„ ê³„íš

1. AI ê¸°ëŠ¥ í™•ì¥
2. ëª¨ë°”ì¼ ì•±
3. ì†Œì…œ ê¸°ëŠ¥
4. ì‹œì¦Œ ì‹œìŠ¤í…œ

---

**ë¬¸ì„œ ì‘ì„± ì™„ë£Œ**: 2025-12-19
