# Seed Data - 개발용 테스트 데이터

## 개요

초기 개발 단계에서 관리자 계정으로 모든 기능을 테스트할 수 있도록 샘플 데이터를 생성하는 기능입니다.

## 목적

- 관리자 계정으로 모든 기능 테스트 가능
- 데이터 없이도 UI/UX 확인 가능
- 개발 환경에서 빠른 프로토타이핑 지원

## 사용 방법

`manage.py`의 `seed` 명령어를 사용하여 시드 데이터를 생성합니다.

```bash
python manage.py seed
```

## 생성되는 데이터

### 1. 샘플 방 (5개)

- 오전 집중 세션
- 오후 스터디
- 야간 코딩
- 주말 프로젝트
- 팀 미팅

**특징:**

- 관리자 계정이 모든 방의 호스트로 설정됨
- 집중 시간: 25분 또는 30분
- 휴식 시간: 5분 또는 10분

### 2. 참여자 데이터

- 각 방에 관리자(호스트) + 3명의 샘플 참여자 추가
- 총 약 9명의 참여자 생성
- 일부 참여자는 연결 상태, 일부는 비연결 상태로 설정

### 3. 타이머 (2개)

- 첫 2개 방에 타이머 생성
- IDLE 상태로 초기화

### 4. 방 예약 (3개)

- 2시간 후 예약
- 내일 예약
- 모레 예약

### 5. 세션 히스토리 (20개)

- 과거 20개의 완료된 집중/휴식 세션 기록
- 통계 페이지에서 데이터 확인 가능
- 관리자 사용자 통계 자동 업데이트

### 6. 업적 시스템

- 5개의 샘플 업적 생성 (첫 집중, 열정의 시작, 집중 마스터, 시간의 주인, 불굴의 의지)
- 관리자 계정에 3개 업적 해제
- 세션 수, 집중 시간 기반 업적

### 7. 커뮤니티 게시글 (5개)

- 다양한 카테고리 게시글 (일반, 질문, 팁, 후기)
- 첫 번째 게시글은 고정 게시글
- 각 게시글에 댓글 및 좋아요 추가

### 8. 랭킹 시스템

- 1개의 샘플 팀 생성 (Focus Masters)
- 관리자를 팀 리더로 설정
- 5개의 랭킹 세션 기록
- 3개의 미니게임 기록 (dino_jump, dot_collector, snake)

## 동작 방식

1. 관리자 계정 확인: `ADMIN_EMAIL` 설정값으로 관리자 계정 검색
2. 중복 방지: 이미 존재하는 데이터는 스킵
3. 트랜잭션 처리: 오류 발생 시 롤백

## 주의사항

- **개발 환경 전용**: 프로덕션 환경에서는 사용하지 않음
- **중복 실행 안전**: 여러 번 실행해도 중복 생성되지 않음
- **관리자 계정 필요**: 시드 데이터 생성 전에 관리자 계정이 존재해야 함

## 관리자 계정 설정

환경 변수 `.env`에서 관리자 이메일을 설정합니다. 관리자 계정은 해당 이메일로 회원가입 시 자동으로 `is_admin=True`로 설정됩니다.

```
ADMIN_EMAIL=admin@focusmate.dev
```

## 확인 방법

시드 데이터 생성 후 다음 기능들을 테스트할 수 있습니다:

- **홈 화면**: "참여방" 섹션에 생성된 방 목록 표시
- **방 예약**: "방 예약" 섹션에 예약 목록 표시
- **방 입장**: 각 방에 참여자 목록 확인
- **통계 페이지**: 세션 히스토리 기반 통계 및 차트 확인
- **업적 시스템**: 업적 목록 및 해제된 업적 확인
- **커뮤니티**: 게시글 목록, 댓글, 좋아요 기능 확인
- **랭킹 시스템**: 팀 정보, 세션 기록, 미니게임 점수 확인
- **리더보드**: Hall of Fame 페이지에서 팀 랭킹 확인

## 문제 해결

### 관리자 계정이 없다는 오류

관리자 계정을 먼저 생성해야 합니다:

1. 프론트엔드에서 `admin@focusmate.dev`로 회원가입
2. 또는 API를 통해 회원가입

### 데이터가 중복 생성되는 경우

시드 스크립트는 중복을 방지하지만, 필요시 데이터베이스를 초기화한 후 다시 시드 데이터를 생성할 수 있습니다.

```bash
python manage.py reset-db
python manage.py upgrade head
python manage.py seed
```
